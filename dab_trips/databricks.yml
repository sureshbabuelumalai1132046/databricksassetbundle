# This is a Databricks asset bundle definition for dab_trips.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.
bundle:
  name: dab_trips_bundles
  #uuid: fb252316-6d3a-48cb-9a33-591cffc5661e

include:
  - resources/**/*.yml
  - src/**/*.ipynb
  - dist/*.whl
targets:
  non-prod:
    mode: development
    default: true
    workspace:
      host: ${secrets.DATABRICKS_HOST}

  prod:
    mode: production
    workspace:
      host: ${secrets.DATABRICKS_HOST}
      root_path: /Workspace/Users/${secrets.DATABRICKS_CLIENT_ID}/.bundle/${bundle.name}/${bundle.target}
    run_as:  
      service_principal_name: "${secrets.DATABRICKS_CLIENT_ID}"
    permissions:
      - level: CAN_MANAGE
        service_principal_name: "${secrets.DATABRICKS_CLIENT_ID}"
      - level: CAN_VIEW
        group_name: dataops_admins
   